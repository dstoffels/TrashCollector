{% extends 'employees/employee_base.html' %}

{% block title %} {{customer.name}} Details {% endblock %}

{% block header %} Customer Details: {{customer.name}} {% endblock %}

{% block content %}

{% if user.is_authenticated %}

<div style="width: 100%%; height: 400px" id="map"></div>

<table class="table center-table table-dark table-bordered">
  <tbody>
    <tr>
      <td>Address:</td>
      <td>{{customer.address}}</td>
    </tr>
    <tr>
      <td>Zip Code:</td>
      <td>{{customer.zip_code}}</td>
    </tr>
    <tr>
        <td>Weekly Pickup Day:</td>
        <td>{{customer.weekly_pickup}}</td>
    </tr>
    <tr>
        <td>Date of Last Pickup:</td>
        <td>{{customer.date_of_last_pickup}}</td>
    </tr>
    <tr>
        <td>One-Time Pickup:</td>
        <td>{{customer.one_time_pickup}}</td>
    </tr>
    <tr>
        <td>Service Suspended:</td>
        <td>{{customer.suspension_start_date}}-{{customer.suspension_end_date}}</td>
    </tr>
    
</tbody>
</table>
<a class="btn btn-primary float-end" type="button"
      href="{% url 'employees:confirm_pickup' customer.id %}">Confirm
      pickup</a>
{% else %}
<p>You are at the employee home page, but you are not logged in.</p>
<a href="{% url 'login' %}">Log In</a>
<a href="{% url 'accounts:register' %}">Sign Up</a>
{% endif %}
{% endblock %}

{% block footer %}

<script>
  function initMap() {
    const location = { lat:{{ customer.lat }}, lng: {{customer.lng}} }
    const map = new google.maps.Map(document.getElementById("map"), {
      zoom: 13,
      center: location
    });

 
      new google.maps.Marker({
        position: location,
        map,
        title: `{{customer.name}}: {{customer.address}}`,
      });
  }
</script>
<script src="{{gmaps}}" async></script>
{% endblock %}
